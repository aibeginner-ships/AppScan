ğŸ§© Goal

Upgrade AppScan to include per-review sentiment analysis and monthly sentiment trends, while keeping the existing Node.js + React stack.

AppScan currently summarizes app store reviews, extracts topic clusters, and shows rating trends.
This version adds sentiment intelligence â€” so the app can show how user satisfaction changes over time (e.g., â€œSentiment dropped from 80% positive in August to 65% in Octoberâ€).

ğŸ¯ Core Objectives

Run sentiment analysis (Positive / Negative) for each review using OpenAI.

Aggregate monthly positive/negative review counts.

Compute average rating per month (already available).

Visualize both rating trend and sentiment ratio trend.

Generate a one-line insight summary (e.g., â€œUser sentiment improved slightly since last month.â€)

âš™ï¸ Constraints

Keep using Node.js (Express) backend.

Use existing OpenAI integration for sentiment classification.

Reuse current review fetching and trend logic.

No database or user accounts yet (single-session app).

Limit to 500 most recent reviews per app.

Stay within Replit fullstack environment (Node + React).

ğŸ§± Functional Requirements
Backend (Express / Node.js)

Endpoint: /analyze

Accepts { url: "<app store link>" }

Detects platform (Google Play / Apple App Store)

Fetches latest 500 reviews (you already have this working)

For each review, extract:

date, rating, content

Run sentiment analysis using OpenAI API:

const sentimentPrompt = `Classify the following review as Positive or Negative:\n"${reviewText}"`;


Store result as sentiment: "positive" or "negative".

Group reviews by month:

[
  {
    "month": "2025-08",
    "avg_rating": 4.5,
    "positive": 380,
    "negative": 120
  },
  {
    "month": "2025-09",
    "avg_rating": 4.3,
    "positive": 320,
    "negative": 180
  },
  {
    "month": "2025-10",
    "avg_rating": 4.1,
    "positive": 280,
    "negative": 220
  }
]


Return structured JSON for frontend visualization.

Helper Modules

sentimentAnalyzer.js â†’ contains the OpenAI call and classification logic.

trendAggregator.js â†’ groups reviews by month and counts sentiment categories.

Output Example

{
  "app_name": "Spotify",
  "store": "Google Play",
  "trend": [
    { "month": "2025-08", "avg_rating": 4.5, "positive": 380, "negative": 120 },
    { "month": "2025-09", "avg_rating": 4.3, "positive": 320, "negative": 180 },
    { "month": "2025-10", "avg_rating": 4.1, "positive": 280, "negative": 220 }
  ],
  "summary": "User sentiment declined slightly since August (4.5â­ â†’ 4.1â­)."
}

Frontend (React)

Components to Add / Modify:

TrendChart.jsx

Line chart for average rating trend

Stacked bar or area for positive vs negative sentiment

Combine both on the same timeline (months on X-axis)

SummaryCards.jsx

Keep existing cards for avg rating and review count

Add â€œ% Positive Reviewsâ€ and â€œ% Negative Reviewsâ€

InsightSummary.jsx

Displays dynamic text summary returned from backend

Charts

Use Chart.js or Recharts

X-axis â†’ Month

Y-axis â†’ Count or Rating

Two visuals:

Line chart (average rating)

Stacked bar (positive vs negative review count)

Visual Hierarchy

[ Summary Cards ]
[ Trend Chart (rating + sentiment) ]
[ Insight Summary ]
[ Top Reviews Section (existing) ]

ğŸ§° Suggested Folder Structure
appscan/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ sentimentAnalyzer.js
â”‚   â”œâ”€â”€ trendAggregator.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ InputBox.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryCards.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TrendChart.jsx
â”‚   â”‚   â”‚   â””â”€â”€ InsightSummary.jsx
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ index.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tailwind.config.js
â””â”€â”€ README.md

ğŸ”§ Step-by-Step Implementation Plan
Step 1 â€” Backend: Sentiment Analysis

Add sentimentAnalyzer.js:

import OpenAI from "openai";
const client = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

export async function getSentiment(reviewText) {
  const prompt = `Classify the following review as Positive or Negative:\n"${reviewText}"`;
  const response = await client.chat.completions.create({
    model: "gpt-4o-mini",
    messages: [{ role: "user", content: prompt }],
  });
  const sentiment = response.choices[0].message.content.toLowerCase();
  return sentiment.includes("positive") ? "positive" : "negative";
}

Step 2 â€” Backend: Monthly Aggregation

In trendAggregator.js, group reviews:

import dayjs from "dayjs";
export function aggregateMonthly(reviews) {
  const grouped = {};
  reviews.forEach(r => {
    const month = dayjs(r.date).format("YYYY-MM");
    if (!grouped[month]) grouped[month] = { ratings: [], positive: 0, negative: 0 };
    grouped[month].ratings.push(r.rating);
    r.sentiment === "positive" ? grouped[month].positive++ : grouped[month].negative++;
  });
  return Object.keys(grouped).map(month => ({
    month,
    avg_rating: (grouped[month].ratings.reduce((a,b)=>a+b,0) / grouped[month].ratings.length).toFixed(1),
    positive: grouped[month].positive,
    negative: grouped[month].negative
  }));
}

Step 3 â€” Frontend: Visualization

Create TrendChart.jsx using mock data first.

Add a second Y-axis or color-coded stacked bars for sentiment.

Example summary:

const summary = `User sentiment ${trendImproved ? "improved" : "declined"} from ${firstMonthRating}â­ to ${lastMonthRating}â­`;

Step 4 â€” Integration & Testing

Connect /analyze endpoint to frontend.

Use real app URLs (Spotify, Duolingo, Threads) to validate sentiment output.

Check for latency or API rate limits.

âœ… Deliverable

A working AppScan v2 that:

Fetches 500 reviews

Classifies each as positive/negative

Aggregates monthly sentiment + rating trends

Visualizes changes over time

Displays a one-line summary insight